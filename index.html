<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>FilePond Plugin Image Transform Demo</title>
        <link
            href="https://unpkg.com/filepond/dist/filepond.css"
            rel="stylesheet"
        />
        <link
            href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css"
            rel="stylesheet"
        />
        <link href="./dist/filepond-plugin-select-image.css" rel="stylesheet" />
    </head>
    <body>
        <input type="file" />

        <img src="" class="output" />

        <script src="./dist/filepond-plugin-select-image.js"></script>
        <script src="https://unpkg.com/filepond-plugin-image-crop/dist/filepond-plugin-image-crop.js"></script>
        <script src="https://unpkg.com/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.js"></script>
        <script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
        <script src="https://unpkg.com/filepond-plugin-image-transform/dist/filepond-plugin-image-transform.js"></script>

        <script src="https://unpkg.com/filepond/dist/filepond.js"></script>

        <script>
            // Register the plugin with FilePond
            FilePond.registerPlugin(
                FilePondPluginImageCrop,
                FilePondPluginImageResize,
                FilePondPluginImagePreview,
                FilePondPluginSelectImage,
                FilePondPluginImageTransform
            );

            // Get a reference to the file input element
            const inputElement = document.querySelector('input[type="file"]');

            // Create the FilePond instance
            const pond = FilePond.create(inputElement, {
                imageCropAspectRatio: '1:1',
                imageResizeTargetWidth: 200,
                onpreparefile: (file, output) => {
                    console.log('onpreparefile');
                    document.querySelector(
                        'img.output'
                    ).src = URL.createObjectURL(output);
                },
            });
        </script>
    </body>
</html>
